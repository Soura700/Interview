<div class="report-container">
  <h2>ğŸ“Š Monthly Reports</h2>

  <!-- Filters -->
  <div class="filters">
    <input type="number" [(ngModel)]="year" placeholder="Year (e.g., 2025)" />
    <input type="number" [(ngModel)]="month" placeholder="Month (1-12)" />
    <input type="text" [(ngModel)]="skill" placeholder="Skill (Optional)" />

    <button (click)="loadRejected()">Rejected Candidates</button>
    <button (click)="loadSuccessByMonth()">Success (Per Month)</button>
    <button (click)="loadProposalRejected()">Proposal Rejected</button>
    <button (click)="loadSuccessBySkill()">Success by Skill</button>
  </div>

  <!-- Loading + System Error -->
  <div *ngIf="loading" class="loading">Loading...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- User Input Error -->
  <div *ngIf="inputError" class="input-error-box">
    âš ï¸ {{ inputError }}
  </div>

  <!-- No Data Found -->
  <div *ngIf="!loading && noData" class="no-data-box">
    ğŸ“­ No data found for selected filters.
  </div>

  <!-- Rejected Candidates -->
  <div class="report-block" *ngIf="!loading && rejected.length > 0">
    <h3>âŒ Rejected Candidates</h3>
    <div class="card" *ngFor="let c of rejected">
      <p><strong>{{ c.fullName }}</strong></p>
      <p>Email: {{ c.email }}</p>
      <p>Skill: {{ c.skillSet }}</p>
      <p>Status: {{ c.status }}</p>
      <p>Month: {{ c.month }}</p>
    </div>
  </div>

  <!-- Success by Month -->
  <div class="report-block" *ngIf="!loading && successByMonth.length > 0">
    <h3>âœ… Successful Candidates (Per Month)</h3>
    <div class="card" *ngFor="let c of successByMonth">
      <p><strong>{{ c.fullName }}</strong></p>
      <p>Email: {{ c.email }}</p>
      <p>Skill: {{ c.skillSet }}</p>
      <p>Status: {{ c.status }}</p>
      <p>Month: {{ c.month }}</p>
    </div>
  </div>

  <!-- Proposal Rejected -->
  <div class="report-block" *ngIf="!loading && proposalRejected.length > 0">
    <h3>ğŸš« Proposal Rejected</h3>
    <div class="card" *ngFor="let c of proposalRejected">
      <p><strong>{{ c.fullName }}</strong></p>
      <p>Email: {{ c.email }}</p>
      <p>Skill: {{ c.skillSet }}</p>
      <p>Status: {{ c.status }}</p>
      <p>Month: {{ c.month }}</p>
    </div>
  </div>

  <!-- Success by Skill -->
  <div class="report-block" *ngIf="!loading && successBySkill.length > 0">
    <h3>ğŸ¯ Successful Candidates (Skill: {{ skill }})</h3>
    <div class="card" *ngFor="let c of successBySkill">
      <p><strong>{{ c.fullName }}</strong></p>
      <p>Email: {{ c.email }}</p>
      <p>Skill: {{ c.skillSet }}</p>
      <p>Status: {{ c.status }}</p>
      <p>Month: {{ c.month }}</p>
    </div>
  </div>

  <!-- Statistics (Animated Chart.js) -->
  <div class="stats-container" *ngIf="!loading && (rejected.length || successByMonth.length)">
    <h2>ğŸ“ˆ Monthly Statistics</h2>
    <canvas id="statsChart"></canvas>
  </div>

</div>